(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{500:function(s,a,t){"use strict";t.r(a);var n=t(8),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"/images/2019/06/01/V3hvB8.png",alt:"V3hvB8.png",width:"1200",height:"459",loading:"lazy"}})]),s._v(" "),t("p",[s._v("前不久将本博客服务器升级成 Cent OS 了，对比原 Windows，访问速度和稳定性都大幅提升，延迟基本保持在 30ms 左右。升级过程中遇到一些坑，特此记录一下。")]),s._v(" "),t("h2",{attrs:{id:"安装-node-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-node-js"}},[s._v("#")]),s._v(" 安装 Node JS")]),s._v(" "),t("h3",{attrs:{id:"软链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#软链接"}},[s._v("#")]),s._v(" 软链接")]),s._v(" "),t("h4",{attrs:{id:"安装-wget"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-wget"}},[s._v("#")]),s._v(" 安装 wget")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n")])])]),t("p",[s._v("wget 是一个下载器，-y 表示 yes，可以免去安装提示。如果已经安装了可以跳过该步。")]),s._v(" "),t("h4",{attrs:{id:"下载-node-js-最新的-bin-包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载-node-js-最新的-bin-包"}},[s._v("#")]),s._v(" 下载 Node JS 最新的 bin 包")]),s._v(" "),t("p",[s._v("可以在"),t("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载页面"),t("OutboundLink")],1),s._v("找到 Node JS 下载地址，然后执行指令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://nodejs.org/dist/v9.3.0/node-v9.3.0-linux-x64.tar.xz\n")])])]),t("p",[s._v("然后就是等着下载完毕。")]),s._v(" "),t("h4",{attrs:{id:"解压包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压包"}},[s._v("#")]),s._v(" 解压包")]),s._v(" "),t("p",[s._v("依次执行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("xz -d node-v9.3.0-linux-x64.tar.xz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xf node-v9.3.0-linux-x64.tar12\n")])])]),t("h4",{attrs:{id:"链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#链接"}},[s._v("#")]),s._v(" 链接")]),s._v(" "),t("p",[s._v("先确认你 nodejs 的路径，我这里的路径为~/node-v9.3.0-linux-x64/bin。确认后依次执行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s ~/node-v9.3.0-linux-x64/bin/node /usr/bin/node\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s ~/node-v9.3.0-linux-x64/bin/npm /usr/bin/npm\n")])])]),t("p",[s._v("注意 ln 指令用于创建关联（类似与 Windows 的快捷方式）必须给全路径，否则可能关联错误。")]),s._v(" "),t("h3",{attrs:{id:"包管理器安装-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#包管理器安装-推荐"}},[s._v("#")]),s._v(" 包管理器安装（推荐）")]),s._v(" "),t("p",[s._v("参考这个：https://github.com/nodesource/distributions")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Using Ubuntu")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://deb.nodesource.com/setup_11.x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -E "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nodejs\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Using Debian, as root")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://deb.nodesource.com/setup_11.x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nodejs\n")])])]),t("h4",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" -v\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -v\n")])])]),t("p",[s._v("如果正确输出版本号，则部署 OK。")]),s._v(" "),t("h2",{attrs:{id:"安装-git、mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-git、mysql"}},[s._v("#")]),s._v(" 安装 Git、MySQL")]),s._v(" "),t("p",[s._v("MySQL 有开源替代品 MariaDB，安装方法比 MySQL 简单很多。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y mariadb\n")])])]),t("h2",{attrs:{id:"部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone ***/blog\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" blog\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" start\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);