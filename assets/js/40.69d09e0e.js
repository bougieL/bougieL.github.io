(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{334:function(a,s,t){"use strict";t.r(s);var e=t(3),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[s("img",{attrs:{src:"/images/2019/06/01/V3hvB8.png",alt:"V3hvB8.png",width:"1200",height:"459",loading:"lazy"}})]),a._v(" "),s("p",[a._v("前不久将本博客服务器升级成 Cent OS 了，对比原 Windows，访问速度和稳定性都大幅提升，延迟基本保持在 30ms 左右。升级过程中遇到一些坑，特此记录一下。")]),a._v(" "),s("h2",{attrs:{id:"安装-node-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-node-js"}},[a._v("#")]),a._v(" 安装 Node JS")]),a._v(" "),s("h3",{attrs:{id:"软链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#软链接"}},[a._v("#")]),a._v(" 软链接")]),a._v(" "),s("h4",{attrs:{id:"安装-wget"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-wget"}},[a._v("#")]),a._v(" 安装 wget")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v("\n")])])]),s("p",[a._v("wget 是一个下载器，-y 表示 yes，可以免去安装提示。如果已经安装了可以跳过该步。")]),a._v(" "),s("h4",{attrs:{id:"下载-node-js-最新的-bin-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载-node-js-最新的-bin-包"}},[a._v("#")]),a._v(" 下载 Node JS 最新的 bin 包")]),a._v(" "),s("p",[a._v("可以在"),s("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载页面"),s("OutboundLink")],1),a._v("找到 Node JS 下载地址，然后执行指令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://nodejs.org/dist/v9.3.0/node-v9.3.0-linux-x64.tar.xz\n")])])]),s("p",[a._v("然后就是等着下载完毕。")]),a._v(" "),s("h4",{attrs:{id:"解压包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压包"}},[a._v("#")]),a._v(" 解压包")]),a._v(" "),s("p",[a._v("依次执行")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("xz "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" node-v9.3.0-linux-x64.tar.xz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xf")]),a._v(" node-v9.3.0-linux-x64.tar12\n")])])]),s("h4",{attrs:{id:"链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#链接"}},[a._v("#")]),a._v(" 链接")]),a._v(" "),s("p",[a._v("先确认你 nodejs 的路径，我这里的路径为~/node-v9.3.0-linux-x64/bin。确认后依次执行")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" ~/node-v9.3.0-linux-x64/bin/node /usr/bin/node\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" ~/node-v9.3.0-linux-x64/bin/npm /usr/bin/npm\n")])])]),s("p",[a._v("注意 ln 指令用于创建关联（类似与 Windows 的快捷方式）必须给全路径，否则可能关联错误。")]),a._v(" "),s("h3",{attrs:{id:"包管理器安装-推荐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包管理器安装-推荐"}},[a._v("#")]),a._v(" 包管理器安装（推荐）")]),a._v(" "),s("p",[a._v("参考这个：https://github.com/nodesource/distributions")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Using Ubuntu")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sL")]),a._v(" https://deb.nodesource.com/setup_11.x "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-E")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" -\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" nodejs\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Using Debian, as root")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sL")]),a._v(" https://deb.nodesource.com/setup_11.x "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" -\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" nodejs\n")])])]),s("h4",{attrs:{id:"测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[a._v("#")]),a._v(" 测试")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])]),s("p",[a._v("如果正确输出版本号，则部署 OK。")]),a._v(" "),s("h2",{attrs:{id:"安装-git、mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-git、mysql"}},[a._v("#")]),a._v(" 安装 Git、MySQL")]),a._v(" "),s("p",[a._v("MySQL 有开源替代品 MariaDB，安装方法比 MySQL 简单很多。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" mariadb\n")])])]),s("h2",{attrs:{id:"部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[a._v("#")]),a._v(" 部署")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone ***/blog\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" blog\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" start\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);